<odoo>
    <data>
        <record id="rule_hr_vacation" model="ir.rule">
            <field name="name">Permisos compañia Historico de vacaciones</field>
            <field name="model_id" ref="model_hr_vacation"/>
            <field name="domain_force">['|',('employee_id.company_id','=',False),('employee_id.company_id', 'in', company_ids)]</field>
        </record>
        
        <record model="ir.ui.view" id="lavish_hr_payroll.list_hr_vacation">
            <field name="name">lavish list hr vacation</field>
            <field name="model">hr.vacation</field>
            <field name="arch" type="xml">
                <tree decoration-info="vacation_type=='enjoy'" decoration-warning="vacation_type=='money'">
                    <field name="employee_id"/>  
                    <field name="contract_id"/>
                    <field name="vacation_type"/>               
                    <field name="initial_accrual_date"/>           
                    <field name="final_accrual_date"/>           
                    <field name="departure_date"/>           
                    <field name="return_date"/>
                    <field name="business_units" sum="Total Días Hábiles"/>
                    <field name="units_of_money" sum="Total Días en Dinero"/>
                    <field name="total" sum="Total"/>
                    <field name="remaining_days"/>
                    <field name="payslip"/>            
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="lavish_hr_payroll.form_hr_vacation">
            <field name="name">lavish form hr vacation</field>
            <field name="model">hr.vacation</field>
            <field name="arch" type="xml">
				<form>
                    <sheet>
                        <group>
                            <field name="employee_id" readonly="1"/>
                            <field name="contract_id" readonly="1"/> 
                        </group> 
                        <group>
                        <group string="Fecha de causación">
                                <field name="initial_accrual_date" readonly="1"/>           
                                <field name="final_accrual_date" readonly="1"/>
                        </group>
                        <group string="Fecha de disfrute">         
                                <field name="departure_date" readonly="1"/>  
                                <field name="return_date" readonly="1"/>  
                        </group>
                        <group string="Días hábiles/festivos">   
                                <field name="base_value" readonly="1"/>               
                                <field name="business_units" readonly="1"/>  
                                <field name="value_business_days" readonly="1"/>  
                                <field name="holiday_units" readonly="1"/>  
                                <field name="holiday_value" readonly="1"/>  
                            </group> 
                            <group string="Días en dinero"> 
                                <field name="base_value_money" readonly="1"/>
                                <field name="units_of_money" readonly="1"/> 
                                <field name="money_value" readonly="1"/>     
                            </group> 
                            </group>  
                            <group>
                                <field name="total" readonly="1"/>
                                <field name="payslip" readonly="1"/>
                                <field name="leave_id" readonly="1"/>
                            </group> 
                    </sheet>        
				</form>
			</field>
		</record>
        <record model="ir.ui.view" id="lavish_hr_payroll.pivot_hr_vacation">
            <field name="name">lavish pivot hr vacation</field>
            <field name="model">hr.vacation</field>
            <field name="arch" type="xml">
                <pivot string="Análisis de Vacaciones" display_quantity="true">
                    <field name="employee_id" type="row"/>
                    <field name="vacation_type" type="col"/>
                    <field name="business_units" type="measure"/>
                    <field name="units_of_money" type="measure"/>
                    <field name="total" type="measure"/>
                    <field name="remaining_days" type="measure"/>
                </pivot>
            </field>
        </record>

        <record model="ir.ui.view" id="lavish_hr_payroll.graph_hr_vacation">
            <field name="name">lavish graph hr vacation</field>
            <field name="model">hr.vacation</field>
            <field name="arch" type="xml">
                <graph string="Análisis de Vacaciones" type="bar" stacked="True">
                    <field name="employee_id"/>
                    <field name="business_units" type="measure"/>
                    <field name="vacation_type" type="row"/>
                </graph>
            </field>
        </record>

        <record id="hr_vacation_concepts_view_search" model="ir.ui.view">
            <field name="name">hr.vacation.view.search</field>
            <field name="model">hr.vacation</field>
            <field name="arch" type="xml">
                <search string="Historico de vacaciones">
                    <field name="employee_id"/>
                    <field name="contract_id"/>
                    <field name="payslip"/>
                    <field name="vacation_type"/>
                    <filter string="Disfrute" name="enjoy" domain="[('vacation_type','=','enjoy')]"/>
                    <filter string="En Dinero" name="money" domain="[('vacation_type','=','money')]"/>
                    <separator/>
                    <filter string="Este Año" name="this_year" 
                            domain="[('initial_accrual_date','&gt;=',time.strftime('%Y-01-01'))]"/>
                    <group expand="0" string="Agrupar Por">
                        <filter string="Empleado" name="employee" context="{'group_by':'employee_id'}"/>
                        <filter string="Tipo" name="type" context="{'group_by':'vacation_type'}"/>
                        <filter string="Mes Inicio" name="month" context="{'group_by':'initial_accrual_date:month'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_hr_vacation">
            <field name="name">Historico de vacaciones</field>
            <field name="res_model">hr.vacation</field>
            <field name="view_mode">tree,pivot,graph,form</field>
            <field name="search_view_id" ref="hr_vacation_concepts_view_search"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No hay registros de vacaciones
                </p>
                <p>
                    Aquí podrá consultar el histórico de vacaciones de los empleados.
                </p>
            </field>
        </record>
    </data>
</odoo>
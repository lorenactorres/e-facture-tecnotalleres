<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data noupdate="1">
        <record model="hr.type.tax.retention" id="lavish_hr_payroll.type_tax_100">
            <field name="code">100</field>
            <field name="name">RETEFUENTE METODO ORDINARIO NÓMINA</field>
        </record>
        <record model="hr.type.tax.retention" id="lavish_hr_payroll.type_tax_102">
            <field name="code">102</field>
            <field name="name">RETEFUENTE METODO PROC. 2 NÓMINA</field>
        </record>
        <record model="hr.type.tax.retention" id="lavish_hr_payroll.type_tax_104">
            <field name="code">104</field>
            <field name="name">PRIMA</field>
        </record>
        <record id="seq_hr_leave" model="ir.sequence">
            <field name="name">Número Ausencia</field>
            <field name="code">seq.hr.leave</field>
            <field name="prefix">AUS-</field>
            <field name="padding">10</field>
        </record>
        <record id="seq_advance_number" model="ir.sequence">
            <field name="name">Numero Anticipo</field>
            <field name="code">payroll.advance.number</field>
            <field name="prefix">ANT-</field>
            <field name="padding">10</field>
        </record>
        <record id="seq_hr_novelties_different_concepts" model="ir.sequence">
            <field name="name">Secuencia de Novedades</field>
            <field name="code">hr.novelties.different.concepts</field>
            <field name="prefix">NOV/%(year)s/</field>
            <field name="padding">5</field>
            <field name="company_id" eval="False"/>
        </record>
        <record id="email_template_payslip_smart" model="mail.template">
            <field name="name">Nómina: Comprobante Inteligente</field>
            <field name="model_id" ref="hr_payroll.model_hr_payslip" />
            <field name="subject">{{ object.company_id.name }} - Comprobante de Pago N.: {{ object.number }} periodo {{ object.date_from.strftime('%d/%m/%Y') }} a  {{ object.date_to.strftime('%d/%m/%Y') }}</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="email_to">{{ object.employee_id.personal_email}}</field>
            <field name="partner_to">{{ object.employee_id.work_contact_id.id }}</field>
            <field name="description">Plantilla inteligente para comprobantes de nómina</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px; background-color: #f5f6fa;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="padding: 30px;">
                                <div
                                    style="background-color: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                    <div
                                        style="background-color: #667eea; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
                                        <h2 style="color: white; margin: 0; font-size: 24px;">
                                            <i class="fa fa-file-text-o" style="margin-right: 10px;"></i>
                                            <strong>Numero:</strong>
                                            <t t-if="object.number">
                                                <strong>
                                                    <t t-esc="object.number" />
                                                </strong>
                                            </t>
                                        </h2>
                                        <p style="color: white; margin: 10px 0 0 0; opacity: 0.9;">
                                            Período: <strong>
                                                <t t-if="object.date_from and object.date_to">
                                                    <t t-esc="object.date_from.strftime('%d/%m/%Y')" />
                                            - <t t-esc="object.date_to.strftime('%d/%m/%Y')" />
                                                </t>
                                                <t
                                                    t-if="not object.date_from and not object.date_to">
                                            No especificado
                                                </t>
                                            </strong>
                                        </p>
                                    </div>

                                    <div
                                        style="background-color: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #667eea;">
                                        <table style="width: 100%;">
                                            <tr>
                                                <td style="padding: 10px;">
                                                    <i class="fa fa-user-circle-o"
                                                        style="color: #667eea; margin-right: 10px;"></i>
                                                    <strong style="color: #333;">Empleado:</strong>
                                                    <span style="color: #555;">
                                                        <t t-out="object.employee_id.name" />
                                                    </span>
                                                </td>
                                                <td style="padding: 10px;">
                                                    <i class="fa fa-id-card-o"
                                                        style="color: #667eea; margin-right: 10px;"></i>
                                                    <strong style="color: #333;">Identificación:</strong>
                                                    <span style="color: #555;">
                                                        <t
                                                            t-out="object.employee_id.identification_id" />
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 10px;">
                                                    <i class="fa fa-briefcase"
                                                        style="color: #667eea; margin-right: 10px;"></i>
                                                    <strong style="color: #333;">Cargo:</strong>
                                                    <span style="color: #555;">
                                                        <t t-out="object.contract_id.job_id.name" />
                                                    </span>
                                                </td>
                                                <td style="padding: 10px;">
                                                    <i class="fa fa-calendar"
                                                        style="color: #667eea; margin-right: 10px;"></i>
                                                    <strong style="color: #333;">Fecha de Ingreso:</strong>
                                                    <span style="color: #555;">
                                                        <t
                                                            t-out="object.contract_id.date_start.strftime('%d/%m/%Y')" />
                                                    </span>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div style="display: flex; gap: 20px; margin-bottom: 25px; justify-content: space-between;">
                                        <div style="width: 50%; background-color: #ebf5ff; padding: 15px; border-radius: 8px; text-align: center;">
                                            <span style="height: 24px; vertical-align: text-bottom;" class="oe_unbreakable "></span>
                                            <i class="fa fa-calendar-check-o"
                                            style="font-size: 24px; color: #3182ce;"></i>
                                            <h3 style="box-sizing:border-box;font-size:18.2px;line-height:1.2;font-weight:500;font-family:'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Ubuntu, 'Noto Sans', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';margin: 10px 0; color: #2c5282;">Días
                                                Trabajados</h3>
                                            <p style="margin: 10px 0; color: #2c5282;">
                                                <t t-out="object.worked_days_line_ids.filtered(lambda l: l.work_entry_type_id.code == 'WORK100').number_of_days"/>
                                            </p>
                                        </div>
                                        <div style="width: 50%; background-color: #fef3f2; padding: 15px; border-radius: 8px; text-align: center;">
                                            <span style="height: 24px; vertical-align: text-bottom;" class="oe_unbreakable "></span>
                                            <i class="fa fa-user-times"
                                            style="font-size: 24px; color: #e53e3e;"></i>
                                            <h3 style="box-sizing:border-box;font-size:18.2px;line-height:1.2;font-weight:500;font-family:'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Ubuntu, 'Noto Sans', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';margin: 10px 0; color: #9b2c2c;">Días
                                                Ausencia</h3>
                                            <p style="box-sizing:border-box;margin: 0; font-size: 20px; color: #2d3748;">
                                                <t t-out="sum(object.leave_days_ids.mapped('days_payslip'))"/>
                                           </p>
                                        </div>
                                    </div>
                                    <!-- Detalles de la Nómina -->
                                    <div
                                        style="background-color: #ffffff; border: 1px solid #e2e8f0; border-radius: 8px; overflow: hidden; margin-bottom: 25px;">
                                        <div
                                            style="background-color: #f7fafc; padding: 15px; border-bottom: 1px solid #e2e8f0;">
                                            <h3 style="margin: 0; color: #2d3748;">
                                                <i class="fa fa-calculator"
                                                    style="margin-right: 10px; color: #667eea;"></i>
                                                Detalle de Pago </h3>
                                        </div>
                                        <div style="padding: 20px;">
                                            <table style="width: 100%; border-collapse: collapse;">
                                                <tr>
                                                    <td
                                                        style="padding: 10px; border-bottom: 1px solid #edf2f7;">
                                                        <i class="fa fa-plus-circle"
                                                            style="color: #38a169; margin-right: 10px;"></i>
                                                        Total Devengado </td>
                                                    <td
                                                        style="padding: 10px; border-bottom: 1px solid #edf2f7; text-align: right; font-weight: bold; color: #38a169;">
                                                        <t
                                                            t-out="format_amount(object.line_ids.filtered(lambda l: l.code == 'TOTALDEV').total, object.company_id.currency_id)" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td
                                                        style="padding: 10px; border-bottom: 1px solid #edf2f7;">
                                                        <i class="fa fa-minus-circle"
                                                            style="color: #e53e3e; margin-right: 10px;"></i>
                                                        Total Deducciones </td>
                                                    <td
                                                        style="padding: 10px; border-bottom: 1px solid #edf2f7; text-align: right; font-weight: bold; color: #e53e3e;">
                                                        <t
                                                            t-out="format_amount(object.line_ids.filtered(lambda l: l.code == 'TOTALDED').total, object.company_id.currency_id)" />
                                                    </td>
                                                </tr>

                                                <t t-if="'PRIMA' in object.struct_id.name">
                                                    <tr>
                                                        <td
                                                            style="padding: 10px; border-bottom: 1px solid #edf2f7;">
                                                            <i class="fa fa-gift"
                                                                style="color: #667eea; margin-right: 10px;"></i>
                                                            Prima de Servicios </td>
                                                        <td
                                                            style="padding: 10px; border-bottom: 1px solid #edf2f7; text-align: right;">
                                                            <t
                                                                t-out="format_amount(object.line_ids.filtered(lambda l: l.code == 'PRIMA').total, object.company_id.currency_id)" />
                                                        </td>
                                                    </tr>
                                                </t>

                                                <t t-if="'CESANTIAS' in object.struct_id.name">
                                                    <tr>
                                                        <td
                                                            style="padding: 10px; border-bottom: 1px solid #edf2f7;">
                                                            <i class="fa fa-bank"
                                                                style="color: #667eea; margin-right: 10px;"></i>
                                                            Cesantías </td>
                                                        <td
                                                            style="padding: 10px; border-bottom: 1px solid #edf2f7; text-align: right;">
                                                            <t
                                                                t-out="format_amount(object.line_ids.filtered(lambda l: l.code == 'CESANTIAS').total, object.company_id.currency_id)" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td
                                                            style="padding: 10px; border-bottom: 1px solid #edf2f7;">
                                                            <i class="fa fa-percentage"
                                                                style="color: #667eea; margin-right: 10px;"></i>
                                                            Intereses de Cesantías </td>
                                                        <td
                                                            style="padding: 10px; border-bottom: 1px solid #edf2f7; text-align: right;">
                                                            <t
                                                                t-out="format_amount(object.line_ids.filtered(lambda l: l.code == 'INT_CESANTIAS').total, object.company_id.currency_id)" />
                                                        </td>
                                                    </tr>
                                                </t>

                                                <tr style="background-color: #f7fafc;">
                                                    <td style="padding: 15px; border-bottom: none;">
                                                        <strong style="font-size: 16px;">
                                                            <i class="fa fa-money"
                                                                style="color: #2c5282; margin-right: 10px;"></i>
                                                            Neto a Pagar </strong>
                                                    </td>
                                                    <td
                                                        style="padding: 15px; border-bottom: none; text-align: right;">
                                                        <strong
                                                            style="font-size: 18px; color: #2c5282;">
                                                            <t
                                                                t-out="format_amount(object.net_wage, object.company_id.currency_id)" />
                                                        </strong>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>

                                    <div
                                        style="background-color: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
                                        <h4 style="margin: 0 0 15px 0; color: #2d3748;">
                                            <i class="fa fa-info-circle"
                                                style="color: #667eea; margin-right: 10px;"></i>
                                            Información Adicional </h4>
                                        <table style="width: 100%;">
                                            <tr>
                                                <td style="padding: 5px 10px;">
                                                    <i class="fa fa-file-contract"
                                                        style="color: #667eea; margin-right: 10px;"></i>
                                                    Tipo de Contrato: </td>
                                                <td style="padding: 5px 10px;">
                                                    <t t-out="object.contract_id.name" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 5px 10px;">
                                                    <i class="fa fa-dollar-sign"
                                                        style="color: #667eea; margin-right: 10px;"></i>
                                                    Salario Base: </td>
                                                <td style="padding: 5px 10px;">
                                                    <t
                                                        t-out="format_amount(object.contract_id.wage, object.company_id.currency_id)" />
                                                </td>
                                            </tr>
                                        </table>
                                    </div>

                                    <div
                                        style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e2e8f0;">
                                        <p
                                            style="color: #718096; font-size: 13px; margin-bottom: 20px; text-align: center;">
                                            Por favor no responda este correo, esto es un mensaje
                                            automático.<br /> Si tiene alguna pregunta, comuníquese
                                            con el departamento de nómina. </p>

                                        <table style="width: 100%; color: #718096; font-size: 12px;">
                                            <tr>
                                                <td style="padding: 5px;">
                                                    <i class="fa fa-user-edit"
                                                        style="margin-right: 5px;"></i> Elaborado
                                                    por: <t t-out="object.create_uid.name" />
                                                </td>
                                                <td style="padding: 5px;">
                                                    <i class="fa fa-user-tie"
                                                        style="margin-right: 5px;"></i> Responsable
                                                    de nómina: <t
                                                        t-out="object.contract_id.hr_responsible_id.name" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 5px;">
                                                    <i class="fa fa-building"
                                                        style="margin-right: 5px;"></i>
                                                    <t t-out="object.company_id.name" />
                                                </td>
                                                <td style="padding: 5px;">
                                                    <i class="fa fa-phone"
                                                        style="margin-right: 5px;"></i>
                                                    <t t-out="object.company_id.phone" />
                                                </td>
                                            </tr>
                                            <tr t-if="object.company_id.email">
                                                <td colspan="2" style="padding: 5px;">
                                                    <i class="fa fa-envelope"
                                                        style="margin-right: 5px;"></i>
                                                    <t t-out="object.company_id.email" />
                                                </td>
                                            </tr>
                                        </table>
                                    </div>

                                    <!-- Firma Digital -->
                                    <div style="text-align: center; margin-top: 30px;">
                                        <div
                                            style="margin-top: 10px; font-size: 12px; color: #718096;">
                                            Documento generado<br />
                                            <t
                                                t-out="datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')" />
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </field>
            <field name="lang">{{ object.employee_id.lang }}</field>
            <field name="auto_delete" eval="False" />
        </record>
    </data>
</odoo>